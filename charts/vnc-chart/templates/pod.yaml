{{- $lection := .Values.lectionName }}
{{- $namespace := .Values.classroom }}
{{- $password := .Values.password }}
{{- $image := .Values.image }}
{{- $port := .Values.port }}
{{- $policy := .Values.imagePullPolicy }}
{{- range $i, $e := until (int .Values.replicaCount) }}
apiVersion: v1
kind: Pod
metadata:
  namespace: "{{ $namespace }}"
  labels:
    run: {{ $lection }}-vnc-{{ $i }}
    lection: {{ $lection }}
  name: vnc-{{ $i }}
spec:
  containers:
  - image: {{ $image }}
    name: vnc-{{ $i }}
    ports:
    - containerPort: {{ $port }}
    env:
    - name: VNC_PW
      value: {{ $password }}
  dnsPolicy: ClusterFirst
  restartPolicy: Always
  imagePullPolicy: {{ $policy }}
---
{{- end }}
